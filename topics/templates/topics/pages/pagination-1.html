{% extends "topics/base.html" %}
{% load static %}
{% block title %}
ç¿»é¡µç½‘é¡µ
{% endblock %}
{% block question %}
<h1>æ‚¨å¥½ğŸ¦†, çˆ¬è™«er~ğŸ‘‹</h1>
    <h3>
   è¿™æ˜¯éœ€è¦ç¿»é¡µçš„ç½‘é¡µğŸ«£
    </h3>
    å®ƒä¸ä¸Šä¸€é“é¢˜ç›®æ²¡å¤ªå¤§åŒºåˆ«å¯¹å§ï¼Œåªæ˜¯å¤šåŠ äº†ä¸€ä¸ªå¾ªç¯ã€‚<br>
    è¯·é—®ï¼šç¬¬ä¸€ç™¾é¡µè¿”å›çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿã€ä¸€ä¸ªjsonæ ¼å¼çš„ç­”æ¡ˆã€‘
</div>
{% endblock %}

{% block content %}
<div class="container mt-5">
        <h1 class="mb-4">ç¿»é¡µå†…å®¹</h1>
        <div id="content">
            <!-- åŠ¨æ€å†…å®¹å°†æ’å…¥åˆ°è¿™é‡Œ -->
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item">
                    <a class="page-link" href="#" id="prev-page">ä¸Šä¸€é¡µ</a>
                </li>
                <li class="page-item">
                    <span class="page-link" id="current-page">1</span>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#" id="next-page">ä¸‹ä¸€é¡µ</a>
                </li>
            </ul>
        </nav>
    </div>

    <script>
        let currentPage = 1;

        function fetchData(page) {
            $.ajax({
                url: `/api/pagination1/${page}/`, // API æ¥å£
                type: 'GET',
                success: function(response) {
                    // å‡è®¾ API è¿”å›çš„æ•°æ®æ ¼å¼ä¸ºï¼š{ "data": "xxx" }
                    const data = response.data;

                    // æ›´æ–°å†…å®¹
                    $('#content').html(`<div class="card"><div class="card-body">${data}</div></div>`);

                    // æ›´æ–°å½“å‰é¡µç æ˜¾ç¤º
                    $('#current-page').text(page);
                },
                error: function() {
                    $('#content').html('<div class="alert alert-danger" role="alert">å†…å®¹åŠ è½½å¤±è´¥</div>');
                }
            });
        }

        $(document).ready(function() {
            // åˆå§‹åŒ–åŠ è½½ç¬¬ä¸€é¡µå†…å®¹
            fetchData(currentPage);

            // ä¸Šä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            $('#prev-page').click(function(e) {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    fetchData(currentPage);
                }
            });

            // ä¸‹ä¸€é¡µæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            $('#next-page').click(function(e) {
                e.preventDefault();
                currentPage++;
                fetchData(currentPage);
            });
        });
    </script>
{% endblock %}
